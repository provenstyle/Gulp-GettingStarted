var gulp = require('gulp');
var shell = require('gulp-shell');
var help = require('gulp-task-listing');
var spawn = require('child_process').spawn;

var services = [];

function run(cmd, args){
	var proc = spawn(cmd, args);
	proc.stdout.on('data', function(data){
		console.log('stdout: ' + data);
	});

	proc.stderr.on('data', function(data){
		console.log('stderr: ' + data);
	});

	proc.on('close', function(code){
		console.log(cmd + ' exited with code ' + code);
	});
}

gulp.task('help', help);

gulp.task('default', function(){
	var msg = "hello";
	debugger;
	console.log(msg);
});

gulp.task('test1', function(){
	return gulp.src('')
		.pipe(shell('echo hello'));
});

gulp.task('test2', shell.task([
		'echo hello',
		'echo world'
	])
);

gulp.task('test3', function(){
	debugger;
	run('echo', ['hello']);
});

gulp.task('stop', shell.task([
				'sc stop "WatchGuard LVS Service"'
			]));

gulp.task('start', shell.task([
				'sc start "WatchGuard LVS Service"'
			]));
